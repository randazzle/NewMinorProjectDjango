{% extends 'bs_base_layout.html' %}

{% load static %}

{% block content %}

    {% if query %}
        <h1>Articles containing "{{ query }}"</h1>
        <h3>
            {% with articles.count as total_results %}
            Found {{ total_results }} result{{ total_results|pluralize }}
            {% endwith %}
        </h3>

        {% for c in articles %}
            <div style="margin: auto;">
            <div class="col-lg-4 col-md-4 col-12" style="padding-top: 10px;padding-bottom: 10px;" >
                <div class="card " style="width:400px; height: 550px;border-radius: 50px;">
                    <img class="card-img-top" src="{{ c.thumb.url }}" alt="Card image" style="height:200px; border-radius:50px;border-bottom-left-radius:00px;box-shadow: 2px 3px 5px rgb(49, 49, 49);  ">
                    <div class="card-body">
                        <a style="color:black ;text-decoration: none; " href="{% url 'articles:detail' slug=c.slug %}" class="card-title"><h4>{{ c.title }}</h4></a>
                        <div  style="background-image: linear-gradient(to right,rgb(0, 0, 0), rgb(0, 0, 0,0)); height: 2px; margin: 10px;margin-left: -3px;">
                        <hr style="opacity: 0;">
                        </div>
                        <p class="card-text" >{{ c.snippet }}</p>
                            <div>
                            <a style="position: absolute; bottom: 20px;" href="{% url 'articles:detail' slug=c.slug %}" class="btn btn-dark">More</a>
                            </div>
                    </div>
                </div>
                </div>
            </div>
        {% empty %}
            <h4> There are no results for your query </h4>
        {% endfor %}
        
        {% if articles.has_other_pages %}

            <ul class="pagination" style=" text-decoration: none;" >
                <div style="margin: auto; display: inline-flex;justify-content: space-between;">
                {% if articles.has_previous %}
                    <li  style="color: silver;"><a style="color: silver;" href="?{% if query %}q={{ query }}&{% endif %}page={{ articles.previous_page_number }}">&laquo;</a></li>
                {% else %}
                    <li class="disabled" style="color: silver;"><span>&laquo;</span></li>
                {% endif %}

                {% for i in articles.paginator.page_range %}
                    {% if articles.number == i %}
                        <li class="active" style="padding-top: 3px; margin-left: 5px; margin-right: 5px; color: black; background-color: white;border-radius: 5px; width: 30px;height: 30px; text-align: center;"><span > {{ i }} <span  class="sr-only">{current}</span></span></li>
                    {% else %}
                    <a style="color: white;"  href = "?{% if query %}q={{ query }}&{% endif %}page={{ i }}"> <li onmouseover="style.background='gray'" onmouseout="style.background='rgb(58, 57, 57)'" style="padding-top: 3px; margin-left: 5px; margin-right: 5px;  background-color: rgb(58, 57, 57);border-radius: 5px; width: 30px;height: 30px; text-align: center;" >{{ i }}</li></a>
                    {% endif %}
                {% endfor %}

                {% if articles.has_next %}
                    <li  ><a style="color: silver;" href="?{% if query %}q={{ query }}&{% endif %}page={{ articles.next_page_number }}">&raquo;</a></li>
                {% else %}
                    <li class="disabled"><span>&raquo;</span></li>
                {% endif %}
                </div>
            </ul>

        {% endif %}
    {% else %}
        <h2>NO QUERY  ERROR</h2>
    {% endif %}
{% endblock %}